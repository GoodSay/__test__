name: Health Check

on:
  pull_request:
    branches:    
      - main
      - 'releases/**'
  schedule:
    - cron: '0,5,10,15,20,25,30,35,40,45,50,55 6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23 * * 1,2,3,4'
    - cron: '0,5,10,15,20,25,30,35,40,45,50,55 6,7,8,9,10,11,12,13,14,15,16,17,18,19 * * 5'
    - cron: '0,5,10,15,20,25,30,35,40,45,50,55 6,7,8,9,10,11,12,13,14,15,16,17,18 * * 6'
    - cron: '0,5,10,15,20,25,30,35,40,45,50,55 10,11,12,13,14,15,16,17,18,19,20,21,22 * * 0'
    - cron: '0,15,30,45 0,1,5 * * 1,2,3,4'
    - cron: '0,15,30,45 0,1,5,20,21,22,23 * * 5'
    - cron: '0,15,30,45 0,1,5,19,20,21,22,23 * * 6'
    - cron: '0,15,30,45 0,1,5,6,7,8,9,23 * * 0'
    - cron: '0,30 2,3,4 * * *'

jobs:
  ping:
    runs-on: ubuntu-18.04
    steps:
      - name: send alert in telegram
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          message: |
            Health check of the
            failed with the result
